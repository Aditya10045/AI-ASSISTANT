<!DOCTYPE html>
<html>
<head>
  <title>AI Assistant</title>
</head>
<body>
  <h1>AI Assistant</h1>
  <select id="task">
    <option value="factual">Factual Q&A</option>
    <option value="summarize">Summarize</option>
    <option value="creative">Creative Writing</option>
  </select><br><br>

  <textarea id="userInput" rows="5" cols="50" placeholder="Enter your prompt..."></textarea><br>
  <button onclick="sendPrompt()">Ask</button>
  <pre id="response"></pre>
  
  <h3>Was this response helpful?</h3>
  <button onclick="sendFeedback(true)">Yes</button>
  <button onclick="sendFeedback(false)">No</button>

  <script>
    let lastPrompt = ""
    let lastResponse = ""

    async function sendPrompt() {
      const task = document.getElementById("task").value;
      const input = document.getElementById("userInput").value;

      const prompt = {
        factual: `Answer this factual question clearly: ${input}`,
        summarize: `Summarize this text in 3-4 sentences: ${input}`,
        creative: `Write a short and creative story or poem based on: ${input}`
      }[task];

      lastPrompt = prompt;

      const res = await fetch('http://localhost:5000/ask', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({prompt})
      });

      const data = await res.json();
      lastResponse = data.response;
      document.getElementById("response").innerText = data.response;
    }

    async function sendFeedback(good) {
      await fetch('http://localhost:5000/feedback', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
          prompt: lastPrompt,
          response: lastResponse,
          helpful: good
        })
      });
      alert("Feedback saved!");
    }
  </script>
</body>
</html>